import{j as e,a as h}from"./react-BgbblwHg.js";import{a as m}from"./axios-Dq7h7Pqt.js";import{A as N}from"./index-BdUbbZgf.js";import{x as v}from"./xcore-framework-logo-BxwEA35n.js";import{u as p}from"./react-i18next-s5vCdhYf.js";import"./cookie-BX9QSSmL.js";import"./react-dom-D7yU5Z7T.js";import"./scheduler-SPyfQU6S.js";import"./react-router-CVtPuFoZ.js";import"./i18next-Bq7Um66T.js";function _(){return e.jsx("div",{className:"logo",children:e.jsx("a",{href:"/dashboard",children:e.jsx("img",{src:v,alt:"XCORE Framework Navbar Logo",style:{height:"3rem"}})})})}function C(){const{logout:n}=h.useContext(N);return e.jsx("nav",{className:"navbar",children:e.jsxs("div",{className:"navbar-container",children:[e.jsx("div",{className:"navbar-logo",children:e.jsx(_,{})}),e.jsx("div",{className:"navbar-actions",children:e.jsx("a",{href:"#",onClick:s=>{s.preventDefault(),n()},className:"navbar-link",rel:"noopener",children:"Logout"})})]})})}function y({modules:n,selectedCategory:s,onModuleSelect:a}){var r;const{t}=p("sidelist");return e.jsxs("aside",{className:"sidelist",children:[e.jsx("h1",{children:t("title_h1")}),e.jsxs("ul",{className:"sidelist-menu",children:[e.jsx("li",{className:"sidelist-menu-item",children:e.jsx("a",{href:"#",onClick:()=>a(""),className:"sidelist-link",children:t("btn_list_reset")})}),s&&((r=n[s])==null?void 0:r.map(l=>e.jsx("li",{className:"sidelist-menu-item",children:e.jsx("button",{onClick:()=>a(l.path),className:"button-sidelist",children:l.name})},l.path)))]})]})}const w=({modules:n,onChange:s})=>{const{t:a}=p("module");return e.jsx("div",{className:"select",children:e.jsxs("select",{onChange:t=>s(t.target.value),children:[e.jsx("option",{value:"",children:a("choose_category")}),Object.keys(n).map(t=>e.jsx("option",{value:t,children:t},t))]})})},S=({modules:n,category:s,onChange:a})=>{const{t}=p("module");return e.jsx("div",{className:"select",children:e.jsxs("select",{onChange:r=>a(r.target.value),children:[e.jsx("option",{value:"",children:t("choose_category")}),n[s].map(r=>e.jsx("option",{value:r.path,children:r.name},r.path))]})})},k=(n,s,a,t)=>{var c,u;const r=o=>{t(i=>({...i,[n]:o.target.value}))};switch(s.widget_type||"entry"){case"checkbox":return e.jsx("input",{type:"checkbox",checked:a===!0||a==="true",onChange:o=>t(i=>({...i,[n]:o.target.checked}))});case"radiobutton":return e.jsx("div",{className:"radio-group",children:(c=s.values)==null?void 0:c.map(o=>e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:n,value:o,checked:a===o,onChange:r}),o]},o))});case"listbox":return e.jsx("select",{value:a,onChange:r,children:(u=s.values)==null?void 0:u.map(o=>e.jsx("option",{value:o,children:o},o))});case"spinbox":return e.jsx("input",{type:"number",value:a,min:s.min??0,max:s.max??100,onChange:r});case"scale":return e.jsx("input",{type:"range",value:a,min:s.min??0,max:s.max??100,onChange:r});case"fileexplorer":return e.jsx("input",{type:"file",accept:".txt",onChange:o=>{const i=o.target.files[0];if(i){const d=new FileReader;d.onload=j=>{t(x=>({...x,[n]:j.target.result}))},d.readAsText(i,"UTF-8")}}});default:return e.jsx("input",{type:"text",value:a,onChange:r})}},O=({modules:n,meta:s,params:a,setParams:t,onRun:r})=>{const{t:l}=p("module"),c=[l("module_details_parameter_th"),l("module_details_description_th"),l("module_details_value_th")],u=async()=>{try{await m.post(`/api/module/${n}/save-options`,{options:a}),alert("Optionen gespeichert!")}catch(i){console.error(i),alert("Fehler beim Speichern")}},o=async()=>{try{const i=await m.get(`/api/module/${n}/load-options`);i.data.options?(t(i.data.options),alert("Optionen geladen!")):alert("Keine gespeicherten Optionen gefunden.")}catch(i){console.error(i),alert("Fehler beim Laden")}};return e.jsxs("div",{className:"module-container",children:[e.jsxs("div",{className:"module-header",children:[e.jsx("h2",{children:s.name}),e.jsx("p",{className:"description",children:s.description}),e.jsxs("div",{className:"meta-info",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Version:"})," ",s.version]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Autor:"})," ",s.author]})]})]}),e.jsx("div",{className:"options-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:l("module_details_parameter_th")}),e.jsx("th",{children:l("module_details_description_th")}),e.jsx("th",{children:l("module_details_value_th")})]})}),e.jsx("tbody",{children:Object.entries(s.options).map(([i,d])=>e.jsxs("tr",{children:[e.jsx("td",{"data-label":c[0],children:e.jsx("code",{children:i})}),e.jsx("td",{"data-label":c[1],children:d.desc}),e.jsx("td",{"data-label":c[2],children:k(i,d,a[i]??d.default,t)})]},i))})]})}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{className:"button-module-start",onClick:r,children:l("btn_module_start")}),e.jsx("button",{className:"button-module-details",onClick:u,children:"Optionen speichern"}),e.jsx("button",{className:"button-module-details",onClick:o,children:"Optionen laden"})]})]})},R=({result:n})=>{const s=h.useRef(),{t:a}=p("module"),t=()=>{var l;const r=(l=s.current)==null?void 0:l.innerText;r&&navigator.clipboard.writeText(r)};return e.jsxs("div",{className:"result-display highlight",children:[e.jsx("button",{className:"copy-btn",onClick:t,children:"ðŸ“‹"}),e.jsx("h2",{className:"glow",children:a("result_display_title_h2")}),e.jsx("br",{}),e.jsx("pre",{ref:s,children:Array.isArray(n.output)?n.output.join(`
`):n.output})]})};function T({modules:n,selectedCategory:s,onCategoryChange:a,selectedModule:t,onModuleChange:r}){const[l,c]=h.useState(null),[u,o]=h.useState({}),[i,d]=h.useState(null);h.useEffect(()=>{t?m.get(`/api/module/${t}/meta`).then(x=>{const g=x.data;c(g);const b={};for(const f in g.options)b[f]=g.options[f].default;o(b),d(null)}):(c(null),o({}),d(null))},[t]);const j=async()=>{const x=await m.post(`/api/module/${t}/run`,u);d(x.data)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"module-selector-container",children:[e.jsx(w,{modules:n,onChange:a}),s&&e.jsx(S,{modules:n,category:s,onChange:r})]}),l&&e.jsx(O,{modules:t,meta:l,params:u,setParams:o,onRun:j}),i&&e.jsx(R,{result:i})]})}function U(){const[n,s]=h.useState({}),[a,t]=h.useState(""),[r,l]=h.useState("");return h.useEffect(()=>{m.get("/api/modules").then(c=>s(c.data))},[]),e.jsxs("div",{className:"dashboard-layout",children:[e.jsx(C,{}),e.jsxs("div",{className:"content-area",children:[e.jsx("div",{className:"sidelist-wrapper",children:e.jsx(y,{modules:n,selectedCategory:a,onModuleSelect:l})}),e.jsx("div",{className:"main-form module-wrapper",children:e.jsx(T,{modules:n,selectedCategory:a,onCategoryChange:t,selectedModule:r,onModuleChange:l})})]})]})}export{U as default};
