import{j as e,a as c}from"./react-BgbblwHg.js";import{a as p}from"./axios-Dq7h7Pqt.js";import{A as N}from"./index-B8PQ26A7.js";import{x as v}from"./xcore-framework-logo-BxwEA35n.js";import"./cookie-BX9QSSmL.js";import"./react-dom-D7yU5Z7T.js";import"./scheduler-SPyfQU6S.js";import"./react-router-CMywDXUr.js";import"./react-i18next-DgpuQhLc.js";import"./i18next-Bhc83OLH.js";function C(){return e.jsx("div",{className:"logo",children:e.jsx("a",{href:"/dashboard",children:e.jsx("img",{src:v,alt:"XCORE Framework Navbar Logo",style:{height:"3rem"}})})})}function y(){const{logout:s}=c.useContext(N);return e.jsx("nav",{className:"navbar",children:e.jsxs("div",{className:"navbar-container",children:[e.jsx("div",{className:"navbar-logo",children:e.jsx(C,{})}),e.jsx("div",{className:"navbar-actions",children:e.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),s()},className:"navbar-link",rel:"noopener",children:"Logout"})})]})})}function w({modules:s,selectedCategory:t,onModuleSelect:n}){var a;return e.jsxs("aside",{className:"sidelist",children:[e.jsx("h1",{children:"ModulÃ¼bersicht"}),e.jsxs("ul",{className:"sidelist-menu",children:[e.jsx("li",{className:"sidelist-menu-item",children:e.jsx("a",{href:"#",onClick:()=>n(""),className:"sidelist-link",children:"Ansicht zurÃ¼cksetzen"})}),t&&((a=s[t])==null?void 0:a.map(r=>e.jsx("li",{className:"sidelist-menu-item",children:e.jsx("button",{onClick:()=>n(r.path),className:"button-sidelist",children:r.name})},r.path)))]})]})}const k=({modules:s,onChange:t})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"select",children:e.jsxs("select",{onChange:n=>t(n.target.value),children:[e.jsx("option",{value:"",children:"Kategorie wÃ¤hlen.."}),Object.keys(s).map(n=>e.jsx("option",{value:n,children:n},n))]})})}),S=({modules:s,category:t,onChange:n})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"select",children:e.jsxs("select",{onChange:a=>n(a.target.value),children:[e.jsx("option",{value:"",children:"Modul wÃ¤hlen.."}),s[t].map(a=>e.jsx("option",{value:a.path,children:a.name},a.path))]})})}),M=(s,t,n,a)=>{var d,u;const r=i=>{a(o=>({...o,[s]:i.target.value}))};switch(t.widget_type||"entry"){case"checkbox":return e.jsx("input",{type:"checkbox",checked:n===!0||n==="true",onChange:i=>a(o=>({...o,[s]:i.target.checked}))});case"radiobutton":return e.jsx("div",{className:"radio-group",children:(d=t.values)==null?void 0:d.map(i=>e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:s,value:i,checked:n===i,onChange:r}),i]},i))});case"listbox":return e.jsx("select",{value:n,onChange:r,children:(u=t.values)==null?void 0:u.map(i=>e.jsx("option",{value:i,children:i},i))});case"spinbox":return e.jsx("input",{type:"number",value:n,min:t.min??0,max:t.max??100,onChange:r});case"scale":return e.jsx("input",{type:"range",value:n,min:t.min??0,max:t.max??100,onChange:r});case"fileexplorer":return e.jsx("input",{type:"file",onChange:i=>a(o=>{var h;return{...o,[s]:(h=i.target.files[0])==null?void 0:h.name}})});default:return e.jsx("input",{type:"text",value:n,onChange:r})}},j=["Parameter","Beschreibung","Wert"],R=({meta:s,params:t,setParams:n,onRun:a})=>e.jsxs("div",{className:"module-container",children:[e.jsxs("div",{className:"module-header",children:[e.jsx("h2",{children:s.name}),e.jsx("p",{className:"description",children:s.description}),e.jsxs("div",{className:"meta-info",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Version:"})," ",s.version]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Autor:"})," ",s.author]})]})]}),e.jsx("div",{className:"options-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Parameter"}),e.jsx("th",{children:"Beschreibung"}),e.jsx("th",{children:"Wert"})]})}),e.jsx("tbody",{children:Object.entries(s.options).map(([r,l])=>e.jsxs("tr",{children:[e.jsx("td",{"data-label":j[0],children:e.jsx("code",{children:r})}),e.jsx("td",{"data-label":j[1],children:l.desc}),e.jsx("td",{"data-label":j[2],children:M(r,l,t[r]??l.default,n)})]},r))})]})}),e.jsx("button",{className:"button-module-start",onClick:a,children:"ðŸš€ Modul ausfÃ¼hren"})]}),A=({result:s})=>{const t=c.useRef(),n=()=>{var r;const a=(r=t.current)==null?void 0:r.innerText;a&&navigator.clipboard.writeText(a)};return e.jsxs("div",{className:"result-display highlight",children:[e.jsx("button",{className:"copy-btn",onClick:n,children:"ðŸ“‹"}),e.jsx("h2",{className:"glow",children:"Ergebnis"}),e.jsx("br",{}),e.jsx("pre",{ref:t,children:Array.isArray(s.output)?s.output.join(`
`):s.output})]})};function E({modules:s,selectedCategory:t,onCategoryChange:n,selectedModule:a,onModuleChange:r}){const[l,d]=c.useState(null),[u,i]=c.useState({}),[o,h]=c.useState(null);c.useEffect(()=>{a?p.get(`/api/module/${a}/meta`).then(x=>{const m=x.data;d(m);const g={};for(const b in m.options)g[b]=m.options[b].default;i(g),h(null)}):(d(null),i({}),h(null))},[a]);const f=async()=>{const x=await p.post(`/api/module/${a}/run`,u);h(x.data)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"module-selector-container",children:[e.jsx(k,{modules:s,onChange:n}),t&&e.jsx(S,{modules:s,category:t,onChange:r})]}),l&&e.jsx(R,{meta:l,params:u,setParams:i,onRun:f}),o&&e.jsx(A,{result:o})]})}function $(){const[s,t]=c.useState({}),[n,a]=c.useState(""),[r,l]=c.useState("");return c.useEffect(()=>{p.get("/api/modules").then(d=>t(d.data))},[]),e.jsxs("div",{className:"dashboard-layout",children:[e.jsx(y,{}),e.jsxs("div",{className:"content-area",children:[e.jsx("div",{className:"sidelist-wrapper",children:e.jsx(w,{modules:s,selectedCategory:n,onModuleSelect:l})}),e.jsx("div",{className:"main-form module-wrapper",children:e.jsx(E,{modules:s,selectedCategory:n,onCategoryChange:a,selectedModule:r,onModuleChange:l})})]})]})}export{$ as default};
