import{j as e,a as c}from"./react-BgbblwHg.js";import{a as p}from"./axios-Dq7h7Pqt.js";import{A as N}from"./index-IPeVCcFh.js";import{x as _}from"./xcore-framework-logo-BxwEA35n.js";import{u as x}from"./react-i18next-s5vCdhYf.js";import"./cookie-BX9QSSmL.js";import"./react-dom-D7yU5Z7T.js";import"./scheduler-SPyfQU6S.js";import"./react-router-CVtPuFoZ.js";import"./i18next-vaxH1JL1.js";function v(){return e.jsx("div",{className:"logo",children:e.jsx("a",{href:"/dashboard",children:e.jsx("img",{src:_,alt:"XCORE Framework Navbar Logo",style:{height:"3rem"}})})})}function C(){const{logout:t}=c.useContext(N);return e.jsx("nav",{className:"navbar",children:e.jsxs("div",{className:"navbar-container",children:[e.jsx("div",{className:"navbar-logo",children:e.jsx(v,{})}),e.jsx("div",{className:"navbar-actions",children:e.jsx("a",{href:"#",onClick:n=>{n.preventDefault(),t()},className:"navbar-link",rel:"noopener",children:"Logout"})})]})})}function y({modules:t,selectedCategory:n,onModuleSelect:r}){var s;const{t:a}=x("sidelist");return e.jsxs("aside",{className:"sidelist",children:[e.jsx("h1",{children:a("title_h1")}),e.jsxs("ul",{className:"sidelist-menu",children:[e.jsx("li",{className:"sidelist-menu-item",children:e.jsx("a",{href:"#",onClick:()=>r(""),className:"sidelist-link",children:a("btn_list_reset")})}),n&&((s=t[n])==null?void 0:s.map(i=>e.jsx("li",{className:"sidelist-menu-item",children:e.jsx("button",{onClick:()=>r(i.path),className:"button-sidelist",children:i.name})},i.path)))]})]})}const w=({modules:t,onChange:n})=>{const{t:r}=x("module");return e.jsx("div",{className:"select",children:e.jsxs("select",{onChange:a=>n(a.target.value),children:[e.jsx("option",{value:"",children:r("choose_category")}),Object.keys(t).map(a=>e.jsx("option",{value:a,children:a},a))]})})},S=({modules:t,category:n,onChange:r})=>{const{t:a}=x("module");return e.jsx("div",{className:"select",children:e.jsxs("select",{onChange:s=>r(s.target.value),children:[e.jsx("option",{value:"",children:a("choose_category")}),t[n].map(s=>e.jsx("option",{value:s.path,children:s.name},s.path))]})})},k=(t,n,r,a)=>{var o,d;const s=l=>{a(h=>({...h,[t]:l.target.value}))};switch(n.widget_type||"entry"){case"checkbox":return e.jsx("input",{type:"checkbox",checked:r===!0||r==="true",onChange:l=>a(h=>({...h,[t]:l.target.checked}))});case"radiobutton":return e.jsx("div",{className:"radio-group",children:(o=n.values)==null?void 0:o.map(l=>e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:t,value:l,checked:r===l,onChange:s}),l]},l))});case"listbox":return e.jsx("select",{value:r,onChange:s,children:(d=n.values)==null?void 0:d.map(l=>e.jsx("option",{value:l,children:l},l))});case"spinbox":return e.jsx("input",{type:"number",value:r,min:n.min??0,max:n.max??100,onChange:s});case"scale":return e.jsx("input",{type:"range",value:r,min:n.min??0,max:n.max??100,onChange:s});case"fileexplorer":return e.jsx("input",{type:"file",onChange:l=>a(h=>{var u;return{...h,[t]:(u=l.target.files[0])==null?void 0:u.name}})});default:return e.jsx("input",{type:"text",value:r,onChange:s})}},R=({meta:t,params:n,setParams:r,onRun:a})=>{const{t:s}=x("module"),i=[s("module_details_parameter_th"),s("module_details_description_th"),s("module_details_value_th")];return e.jsxs("div",{className:"module-container",children:[e.jsxs("div",{className:"module-header",children:[e.jsx("h2",{children:t.name}),e.jsx("p",{className:"description",children:t.description}),e.jsxs("div",{className:"meta-info",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Version:"})," ",t.version]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Autor:"})," ",t.author]})]})]}),e.jsx("div",{className:"options-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:s("module_details_parameter_th")}),e.jsx("th",{children:s("module_details_description_th")}),e.jsx("th",{children:s("module_details_value_th")})]})}),e.jsx("tbody",{children:Object.entries(t.options).map(([o,d])=>e.jsxs("tr",{children:[e.jsx("td",{"data-label":i[0],children:e.jsx("code",{children:o})}),e.jsx("td",{"data-label":i[1],children:d.desc}),e.jsx("td",{"data-label":i[2],children:k(o,d,n[o]??d.default,r)})]},o))})]})}),e.jsx("button",{className:"button-module-start",onClick:a,children:s("btn_module_start")})]})},A=({result:t})=>{const n=c.useRef(),{t:r}=x("module"),a=()=>{var i;const s=(i=n.current)==null?void 0:i.innerText;s&&navigator.clipboard.writeText(s)};return e.jsxs("div",{className:"result-display highlight",children:[e.jsx("button",{className:"copy-btn",onClick:a,children:"ðŸ“‹"}),e.jsx("h2",{className:"glow",children:r("result_display_title_h2")}),e.jsx("br",{}),e.jsx("pre",{ref:n,children:Array.isArray(t.output)?t.output.join(`
`):t.output})]})};function E({modules:t,selectedCategory:n,onCategoryChange:r,selectedModule:a,onModuleChange:s}){const[i,o]=c.useState(null),[d,l]=c.useState({}),[h,u]=c.useState(null);c.useEffect(()=>{a?p.get(`/api/module/${a}/meta`).then(m=>{const j=m.data;o(j);const g={};for(const b in j.options)g[b]=j.options[b].default;l(g),u(null)}):(o(null),l({}),u(null))},[a]);const f=async()=>{const m=await p.post(`/api/module/${a}/run`,d);u(m.data)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"module-selector-container",children:[e.jsx(w,{modules:t,onChange:r}),n&&e.jsx(S,{modules:t,category:n,onChange:s})]}),i&&e.jsx(R,{meta:i,params:d,setParams:l,onRun:f}),h&&e.jsx(A,{result:h})]})}function W(){const[t,n]=c.useState({}),[r,a]=c.useState(""),[s,i]=c.useState("");return c.useEffect(()=>{p.get("/api/modules").then(o=>n(o.data))},[]),e.jsxs("div",{className:"dashboard-layout",children:[e.jsx(C,{}),e.jsxs("div",{className:"content-area",children:[e.jsx("div",{className:"sidelist-wrapper",children:e.jsx(y,{modules:t,selectedCategory:r,onModuleSelect:i})}),e.jsx("div",{className:"main-form module-wrapper",children:e.jsx(E,{modules:t,selectedCategory:r,onCategoryChange:a,selectedModule:s,onModuleChange:i})})]})]})}export{W as default};
